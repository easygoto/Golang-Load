# 基本语法

## 数据类型

[点击查看测试代码](test/study/01_type_test.go)

### Printf

- %v: 自然形式内容
- %+v: 自然形式 json
- %#v: 自然形式 id 和 json
- %T: 类型
- %t: 布尔值
- %b: 二进制
- %o: 八进制
- %d: 十进制整型
- %x: 十六进制
- %X: 大写的十六进制
- %x: base64 编码
- %f: 浮点数, 复数
- %g: 精确浮点数, 复数
- %e: 科学计数法
- %E: 科学计数法
- %c: unicode 字符
- %s: 字符串
- %U: unicode 字符串
- %q: 带有引号
- %p: 指针值

## 特性

- 创建
    - make: 返回引用类型
    - new: 返回指针类型
- 基础方法
    - append: `切片`添加, 扩容
    - copy: `切片`拷贝
    - delete: 删除 map 中元素
    - close: 关闭 chan, 禁止写入
    - len: 实际长度, 支持 string, array, slice, map, chan
    - cap: 容器容量, 支持 array, slice, chan
- 异常处理
    - panic: 中断程序, 抛出信息
    - recover: 接收抛出的信息
    - defer: 关键字, 最后一定要做的事情
- 指针
    - 基本: 不支持指针++, --, 指向指针的指针和 C 语言一致, 没有函数指针
    - 指针数组: 一个数组里全是指针
    - 数组指针: 指向数组的指针
- json
    - Marshal: 序列化, 结构体中只会序列公用的字段, 结构体可以指定字段的映射
    - Unmarshal: 反序列化, 需要传递反序列化的原型
- module
    - `go mod init modname` 初始化模块
    - `go mod graph` 依赖
    - `go mod why` 依赖关系
    - `go list -m all` 列出依赖关系
    - `go get` 获取包
    - `go build` 此时也会添加依赖
    - `go mod download` 下载依赖
    - `go mod tidy` 整理依赖
    - `go mod verify` 验证依赖
    - `go mod edit` 编辑 mod 的属性, help
    - `go mod vendor` 依赖放到 vendor 中

[点击查看测试代码](test/study/02_api_test.go)

## 并发

- go: 启动一个 goroutine, 协程没有运行的原因可能是主程序结束, 协程也跟着结束
- chan: 协程之间的通信, 必须在 goroutine 中执行
    - `func(c chan int) { }` 读写均可的 chan
    - `func(c <-chan int) { }` 只读的 chan
    - `func(c chan<- int) { }` 只写的 chan
    - 作为一个好的习惯, 写完 chan 需要 close
- select: 阻塞式从 chan 读取数据, 自上向下依次读取
- WaitGroup: 协程同步
    - Add(delta): 添加协程记录, delta 表示需要几次 `Done` 才能解除
    - Done(): 移除一个协程记录
    - Wait(): 等待所有协程完成, 若总 delta 不等于总 Done 的数量, 会发生死锁

[点击查看测试代码](test/study/03_goroutine_test.go)

## 面向对象

1. `静态` 文件中函数外部定义的变量, 类似于静态变量
1. `封装` type struct 可以作为类使用 `type Apple struct {}`
1. `多态` type interface 作为接口, 类不需要声明直接实现方法, 实现方法后就是该接口的子类
1. `构造` 构造方法需要对外提供若干函数, 来实现构造函数的功能 `func (apple Apple) NewApple() *Apple {return &Apple{}}`
1. `继承` 可以把要继承的结构体作为一个成员变量`组合`到结构体中, 成员变量默认访问自己的, 没有就访问 `父类` 的
1. 接口定义在任何地方都没有问题, 始终会被继承, 优先使用本包的接口
1. 对外提供的方法和结构体名称和文件名没有任何关系, 和文件夹名, 包名, 结构体名, 函数名有直接关系

[点击查看测试代码](test/study/04_oo_test.go)

- [源文件 a.go](src/demo/case/a.go)
- [源文件 b.go](src/demo/case/b.go)
- [源文件 c.go](src/demo/box/c.go)

## 网络编程

[点击查看测试代码](test/study/05_net_test.go)
